AppTraces
| where Message == "TestResult" and OperationName == "PingTest"
| where AppRoleName == "${function_name}"
| where "Started" in ((ContainerEvent_CL 
                      | where ContainerGroup_s == "${container_group_name}"
                      | where Message startswith_cs "Kill" or Message startswith_cs "Start"
                      | extend Operation=split(Message," ")[0]
                      | top 1 by TimeGenerated desc nulls last
                      | project Operation))
| extend Connected=Properties['Connected']
| order by TimeGenerated desc